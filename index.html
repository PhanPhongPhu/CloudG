<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloudmap</title>

    <!-- FONT INTER -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@200;300;400&display=swap" rel="stylesheet" />

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
</head>

<body>
    <div id="cloudLoader">
    <img src="https://www.dropbox.com/scl/fi/i9zfuxpbf2bkx2guu4m11/LogoCloudmap.png?rlkey=7tugaqvhjs7n67gm24aji13iq&st=wh9v7buj&dl=1" class="cloud-logo">

    <div class="cloud-progress">
        <div class="cloud-progress-bar" id="cloudProgressBar"></div>
    </div>

    <div class="cloud-loading-text" id="cloudLoadingText">
        ƒêang t·∫£i b·∫£n ƒë·ªì‚Ä¶
    </div>
    </div>

    <div class="layout">

    <!-- ================= HEADER NAVY ================= -->
    <header class="topbar">

        <button id="menuToggle" class="menu-btn" onclick="toggleSidebar()">
            <i data-feather="menu"></i>
        </button>

        <div class="topbar-logo">
            <img src="https://www.dropbox.com/scl/fi/i9zfuxpbf2bkx2guu4m11/LogoCloudmap.png?rlkey=7tugaqvhjs7n67gm24aji13iq&st=wh9v7buj&dl=1" alt="CloudMap Logo">
        </div>

        <div class="topbar-tools">
            <div class="tool-item" onclick="openPanel('layerPanel')" data-label="Qu·∫£n l√Ω l·ªõp">
                <span class="gicon">layers</span>
            </div>

            <div class="tool-item" onclick="openPanel('analyticsPanel')" data-label="Ph√¢n t√≠ch">
                <span class="gicon">monitoring</span>
            </div>

            <div class="tool-item" onclick="openPanel('infoPanel')" data-label="Th√¥ng tin">
                <span class="gicon">info</span>
            </div>
            <div class="tool-item" onclick="openPanel('basemapGallery')" data-label="B·∫£n ƒë·ªì n·ªÅn">
                <span class="gicon">map</span>
            </div>
            <div class="tool-item" onclick="openPanel('aiPanel')" data-label="Chatbot">
                <span class="gicon">smart_toy</span>
            </div>

        </div>
    </header>

    <!-- ================= SIDEBAR NAVY BLUR ================= -->
    <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <button id="sidebarToggle" onclick="toggleSidebar()" class="sidebar-toggle">
                <i data-feather="chevron-left"></i>
            </button>
        </div>

        <div class="sidebar-section"><h3>Ch·ª©c nƒÉng</h3></div>

        <ul class="sidebar-menu">
            <li onclick="zoomToVietnam()">
                <i data-feather="maximize-2"></i> Ph√≥ng to
            </li>
            <li onclick="toggleLabels()">
                <i data-feather="tag"></i> B·∫≠t/t·∫Øt nh√£n
            </li>
        </ul>

        <div class="sidebar-section">T√¨m ki·∫øm</div>

        <div class="search-box">
            <i data-feather="search" class="search-icon"></i>
            <input id="searchProvince" placeholder="T√¨m t·ªânh..." onkeyup="searchProvince()">
        </div>

        <ul id="searchResult" class="search-result"></ul>
    </aside>

    <!-- ================= MAP ================= -->
    <main id="map">
        <div id="mapLoading">ƒêang t·∫£i b·∫£n ƒë·ªì...</div>
    </main>

    <!-- ===================== PANELS ======================== -->
    <div id="panels">

        <!-- ============ INFO PANEL ============ -->
        <div id="infoPanel" class="panel info-panel">

        <div class="info-header">
            <div class="info-title-box">
                <span id="info-title-text"></span>
            </div>
            <button id="editInfoBtn" class="edit-info-btn" onclick="toggleEditInfo()">
                üõ†
            </button>
        </div>

        <div id="infoContent" class="hidden"></div>

        <div id="info-default" class="info-default">
            <i data-feather="map-pin"></i>
            <p>Ch·ªçn m·ªôt t·ªânh/ th√†nh ƒë·ªÉ xem th√¥ng tin.</p>
        </div>
    </div>

        <!-- ============ LAYER PANEL ============ -->
        <div id="layerPanel" class="panel layer-panel">

            <div class="layer-header">
                <h3>Qu·∫£n l√Ω l·ªõp</h3>
                <label for="fileLoader" class="add-layer-btn">
                    <span>Ôºã</span> Th√™m d·ªØ li·ªáu
                </label>
                <input type="file" id="fileLoader" hidden>
            </div>

            <div class="layer-section-title">Danh s√°ch l·ªõp</div>
            <div class="layer-item vn-default">
            <div class="layer-title">
                <span class="gicon">public</span>
                <span class="layer-name">To√†n Qu·ªëc</span>
            </div>

            <div class="layer-tools">
                <span class="gicon vn-toggle" title="B·∫≠t/T·∫Øt l·ªõp">visibility</span>
                <span class="gicon vn-border" title="ƒê·ªïi m√†u vi·ªÅn">colorize</span>
                <span class="gicon vn-fill" title="ƒê·ªïi m√†u n·ªÅn">format_paint</span>
                <span class="gicon vn-weight" title="ƒê·ªô d√†y vi·ªÅn">line_weight</span>
            </div>
            </div>
            <div id="layerList" class="layer-list"></div>

        </div>

        <!-- ============ AI PANEL ============ -->
        <div id="aiPanel" class="panel ai-panel">

            <div class="ai-header">
                <i data-feather="codepen"></i>
                <span>Chatbot</span>
            </div>


            <div id="aiMessages" class="ai-messages"></div>

            <div class="ai-input-box">
                <input id="aiInput" placeholder="H·ªèi v·ªÅ t·ªânh, d√¢n s·ªë, di·ªán t√≠ch...">
                <button class="send-btn" onclick="askAI()">
                    <i data-feather="send"></i>
                </button>
            </div>

        </div>

        <!-- ============ ANALYTICS PANEL ============ -->
        <div id="analyticsPanel" class="panel analytics-panel">

            <h3>Ph√¢n t√≠ch d·ªØ li·ªáu</h3>

            <div id="analytics-summary" class="analytics-box"></div>

            <h4>Top 5 t·ªânh theo di·ªán t√≠ch</h4>
            <table id="topArea" class="rank-table"></table>

            <h4>Top 5 t·ªânh theo d√¢n s·ªë</h4>
            <table id="topPopulation" class="rank-table"></table>

            <h4>Bi·ªÉu ƒë·ªì di·ªán t√≠ch</h4>
            <canvas id="chartArea"></canvas>

            <h4>Bi·ªÉu ƒë·ªì d√¢n s·ªë</h4>
            <canvas id="chartPopulation"></canvas>

            <h4>Bi·ªÉu ƒë·ªì m·∫≠t ƒë·ªô d√¢n s·ªë</h4>
            <canvas id="chartDensity"></canvas>

        </div>

        <!-- ============ BASEMAP PANEL ============ -->
        <div id="basemapGallery" class="panel basemap-panel">
            <h3>B·∫£n ƒë·ªì n·ªÅn</h3>
            <div class="bm-list">
                <div class="bm-item" onclick="setBasemap('osm')">OSM</div>
                <div class="bm-item" onclick="setBasemap('esri')">V·ªá tinh Esri</div>
                <div class="bm-item" onclick="setBasemap('google')">GMap</div>
                <div class="bm-item" onclick="setBasemap('sat')">V·ªá tinh GMap</div>
                <div class="bm-item" onclick="setBasemap('hybrid')">V·ªá tinh GMap 1</div>
                <div class="bm-item" onclick="setBasemap('light')">Tr·ªëng</div>
            </div>
        </div>

    </div>
    <!-- ================= END PANELS ================= -->

</div> <!-- END LAYOUT -->

<!-- ======================================== -->
<!-- =============== JS ===================== -->
<!-- ======================================== -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
<script src="app.js"></script>

<script>
    feather.replace();
</script>

</body>
</html>
